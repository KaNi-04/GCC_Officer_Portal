	<!DOCTYPE html>
	<html lang="en" dir="">
	<html xmlns:th="http://www.thymeleaf.org">
	
	<head th:replace="~{fragments/modules/base/head :: head}"></head>
	
	<body>
	    <!--[if lt IE 8]>
	            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
	        <![endif]-->
	
	    <div class="wrapper"> 
	        <!-- header top menu Start -->
	        <header th:replace="~{fragments/modules/base/header :: header}"></header>
	        <!-- header top menu end -->
	 
	        <div class="page-wrap">
	            <!--=============== Left Menu side Start ================-->
	            <div th:replace="~{fragments/modules/base/menu :: menu}"></div>
	            <!--=============== Left side End ================-->
	            <div class="main-content"> 
	                <div class="container-fluid"> 
	                    <div class="page-header">
	                        <div class="row align-items-end">
	                            <div class="col-lg-4">
	                                <div class="page-header-title">
	                                    <i class='fa fa-paper-plane'  style='font-size:24px; color: #1aafd4'></i>
	                                    <div class="d-inline">
	                                        <h5>License Issued Info</h5>
	                                        <span>Pet Registration</span>
	                                    </div>
	                                </div>
	                            </div>
	                            <!-- <div class="col-lg-4">
	                                    <nav class="breadcrumb-container" aria-label="breadcrumb">
	                                        <ol class="breadcrumb">
	                                            <li class="breadcrumb-item">
	                                                <a href="/index"><i class="ik ik-home"></i></a>
	                                            </li>
	                                            <li class="breadcrumb-item">Asset QR Feedback</li>
	                                            <li class="breadcrumb-item">Master</li>
	                                            <li class="breadcrumb-item active" aria-current="page">Category</li>
	                                        </ol>
	                                    </nav>
	                                </div> -->
	                            <div class="col-lg-5">
	                                <div class="content">
	                                    <div class="block block-rounded">
	                                        <div class="block-header block-header-default" style="display: block;">
	                                            <form class="row" action="javascript:getbydate()">
	
	                                                <div class="row">
	                                                    <div class="col-4">
	                                                        <input type="date" th:value="${fromDate}" class="form-control"
	                                                            name="FromDate" id="fromdate"
	                                                            data-date-format="yyyy-mm-dd" />
	                                                    </div>
	                                                    <div class="col-4">
	                                                        <input type="date" th:value="${toDate}" class="form-control"
	                                                            name="ToDate" id="todate" data-date-format="yyyy-mm-dd" />
	                                                    </div>
	                                                    <div class="col-2 p-0 text-center">
	                                                        <button type="submit" class="btn btn-sm btn-primary"
	                                                            name="submit" id="submit"
	                                                            onclick="getbydate()">Submit</button>
	
	                                                        <br>
	                                                    </div>
	                                                    <div class="col-2 p-0 text-center">
	                                                        <button class="btn btn-danger" onclick="resetDate()"
	                                                            name="reset" type="reset">Reset</button>
	                                                    </div>
	                                                </div>
	                                        </div>
	
	                                        </form>
	
	                                    </div>
	
	                                </div>
	                            </div>
	
                                <div class="col-lg-3">
                                    <nav class="breadcrumb-container" aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item">
                                                <a href="/index"><i class="ik ik-home"></i></a>
                                            </li>
                                            <li class="breadcrumb-item">Pet Registration</li>
                                            <li class="breadcrumb-item">Lisense</li>
                                        </ol>
                                    </nav>
                                </div>
	                        </div>
	                    </div>
	
	                    <hr>
	                    <div class="row">
	                        <div class="col-md-12">
	                            <div class="card">
	
	                                <div class="card-block">
	                                    <div>
	                                        <table id="assetDatatable"
	                                            class="table table-striped table-bordered table-hover dataTable" role="grid"
	                                            width="99.5%">
	                                            <thead class="thead-dark">
	                                                <tr role="row">
	                                                    <th>S.No</th>
	                                                    <th>Type</th>
	                                                    <th>Issued By</th>
	                                                    <th>UpDated Date</th>
	                                                    <th>Pet Photo</th>
	                                                    <th>Rabies certi</th>
	                                                    <th>License Info</th>
	                                                    <th class="text-center no-sort">Owner Info</th>
	                                                </tr>
	                                                </theadclass="thead-dark">
	                                            <tbody>
	                                                <tr th:each="list, i : ${petlist}" class="${petlist}">
	                                                    <td th:text="${i.count}">0</td>
	                                                    <td th:text="${list.species}"></td>
	                                                    <td th:text="${list.updatedby}"></td>
	                                                    <td th:text="${list.statusdate}"></td>
	                                                    <td class="text-center">
	                                                        <button type="button"
	                                                            th:onclick="petimg([[${list.mobilenum}]],[[${list.uniqueid}]])"
	                                                            class="btn btn-primary">
	                                                            view
	                                                        </button>
	                                                    </td>
	
	                                                    <td class="text-center">
	                                                        <button type="button"
	                                                            th:onclick="certificateimg([[${list.mobilenum}]],[[${list.uniqueid}]])"
	                                                            class="btn btn-primary">
	                                                            view
	                                                        </button>
	                                                    </td>
	                                                    <td>
	                                                        <p>
	                                                            <span class="badge bg-success"
	                                                                th:onclick="licenceInfo([[${list.mobilenum}]],[[${list.uniqueid}]])"
	                                                                style="cursor: pointer;">Info</span>
	                                                        </p>
	                                                    </td>
	
	                                                    <td class="text-center">
	                                                        <a th:onclick="viewOwner( [[${list.mobilenum}]] );"
	                                                            data-bs-toggle="tooltip" data-bs-animation="true"
	                                                            data-bs-placement="top" title="View PetOwner info"><i
	                                                                class="fa-regular fa-user"
	                                                                style="font-size: 18px;cursor: pointer;"></i></a>
	                                                    </td>
	                                                </tr>
	                                            </tbody>
	                                            <tfoot class="thead-dark">
	                                                <tr>
	                                                    <th>S.No</th>
	                                                    <th>Type</th>
	                                                    <th>Issued By</th>
	                                                    <th>UpDated Date</th>
	                                                    <th>Pet Photo</th>
	                                                    <th>Rabies certi</th>
	                                                    <th>License Info</th>
	                                                    <th>Owner Info</th>
	
	                                                </tr>
	                                            </tfoot>
	                                        </table>
	                                    </div>
	                                </div>
	
	
	
	
	                                <!-- Modal -->
	                                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
	                                    aria-labelledby="exampleModalCenterLabel" aria-hidden="true">
	                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	                                        <div class="modal-content">
	                                            <div class="modal-header">
	                                                <h5 class="modal-title" id="exampleModalCenterLabel">Photo</h5>
	                                                <button type="button" class="close" data-dismiss="modal"
	                                                    aria-label="Close"><span aria-hidden="true">&times;</span></button>
	                                            </div>
	                                            <div class="modal-body">
	                                                <img alt="" id="myImg" src="" style="width:100%">
	                                            </div>
	                                            <div class="modal-footer">
	                                                <button type="button" class="btn btn-secondary"
	                                                    data-dismiss="modal">Close</button>
	                                            </div>
	                                        </div>
	                                    </div>
	                                </div>
	
	
	                            </div>
	                        </div>
	                    </div>
	
	                </div>
	            </div>
	
	            <footer th:replace="~{fragments/modules/base/footer :: footer}"></footer>
	        </div>
	    </div>
	
	   <!--license info State  -->
	   <div class="modal fade" id="licForm" tabindex="-1" role="dialog" aria-labelledby="licFormCenterLabel"
	   aria-hidden="true">
	   <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	       <div class="modal-content">
	           <div class="modal-header">
	               <h5 class="modal-title" id="licFormCenterLabel">License information</h5>
	               <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
	                       aria-hidden="true">&times;</span></button>
	           </div>
	           <div class="modal-body">
	               <div class="row">
	                   <input type="hidden" class="form-control text-center" name="uniqid" id="uniqid" disabled />
	                   <div class="col-xl-6 col-md-12"> <strong>pet Id:</strong>
	                       <p class="text-muted form-control showInputValue" id="uniqueid"></p>
	                   </div>
	                   <div class="col-xl-6 col-md-12"> <strong>License No:</strong>
	                       <p class="text-muted form-control showInputValue" id="licno"></p>
	                   </div>
	                   <div class="col-xl-6 col-md-12"> <strong>Phone No:</strong>
	                       <p class="text-muted form-control showInputValue" id="phonee"></p>
	                   </div>
	                   <div class="col-xl-6 col-md-12"> <strong>validity:</strong>
	                       <p class="text-muted form-control showInputValue" id="valid"></p>
	                   </div>
	                   <!-- <div class="block-content block-content-full text-end bg-body" id="mbutton3">
	                     <button type="button" class="btn btn-sm btn-alt-primary" onclick="viewfulllicense()">View</button>
	                     <button type="button" class="btn btn-sm btn-alt-secondary" data-bs-dismiss="modal">Close</button>
	                 </div> -->
	                   </div>
	               </div>
	           </div>
	       </div>
	   </div>
	 </div>
	    <!-- owner Info  -->
	    <div class="modal fade" id="ownerForm" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterLabel"
	        aria-hidden="true">
	        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	            <div class="modal-content">
	                <div class="modal-header">
	                    <h5 class="modal-title" id="exampleModalCenterLabel">Pet Owner information</h5>
	                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
	                            aria-hidden="true">&times;</span></button>
	                </div>
	                <div class="modal-body">
	                    <div class="row">
	                        <input type="hidden" class="form-control text-center" name="uniqid" id="uniqid" disabled />
	                        <div class="col-xl-6 col-md-12"> <strong>Tittle</strong>
	                            <p class="text-muted form-control showInputValue" id="title"></p>
	                        </div>
	                        <div class="col-xl-6 col-md-12"> <strong>Pet Owner Name</strong>
	                            <p class="text-muted form-control showInputValue" id="fname"></p>
	                        </div>
	                        <div class="col-xl-6 col-md-12"> <strong>Door No</strong>
	                            <p class="text-muted form-control showInputValue" id="doornumber"></p>
	                        </div>
	                        <div class="col-xl-6 col-md-12"> <strong>Street</strong>
	                            <p class="text-muted form-control showInputValue" id="street"></p>
	                        </div>
	
	                        <div class="col-xl-6 col-md-12"> <strong>Area</strong>
	                            <p class="text-muted form-control showInputValue" id="area"></p>
	                        </div>
	
	                        <div class="col-xl-6 col-md-12"> <strong>City</strong>
	                            <p class="text-muted form-control showInputValue" id="city"></p>
	                        </div>
	                        <div class="col-xl-6 col-md-12"> <strong>Pincode</strong>
	                            <p class="text-muted form-control showInputValue" id="pincode"></p>
	                        </div>
	                        <div class="col-xl-6 col-md-12"> <strong>Zone</strong>
	                            <p class="text-muted form-control showInputValue" id="zone"></p>
	                        </div>
	                        <div class="col-xl-6 col-md-12"> <strong>Ward</strong>
	                            <p class="text-muted form-control showInputValue" id="ward"></p>
	                        </div>
	                        <div class="col-xl-6 col-md-12"> <strong>Contact No</strong>
	                            <p class="text-muted form-control showInputValue" id="phone"></p>
	                        </div>
	                        <div class="col-xl-6 col-md-12"> <strong>Email Id</strong>
	                            <p class="text-muted form-control showInputValue" id="email"></p>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>
	    <!-- End owner Info  -->
	    <!--	pet License -->
	    <!-- <div class="modal fade backdrop" id="getpetlic" data-backdrop="static" tabindex="-1" role="dialog"
	        aria-labelledby="staticBackdropLabel" aria-hidden="true">
	        <div class="modal-dialog modal-xl" role="document">
	            <div class="modal-content">
	                <div class="block block-rounded block-themed block-transparent mb-0">
	                    <div class="block-header bg-primary-dark">
	                        <h3 class="block-title" id="lic">Download License</h3>
	                        <button onclick="printme()" class="btn btn-sm btn-primary">Print</button>
	                        <div class="block-options">
	                            <button onclick="closeme()" class="btn-block-option">
	                                <i class="fa fa-fw fa-times"></i>
	                            </button>
	                        </div>
	                    </div>
	                    <div id="htmldatatxt">
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>
	 -->
	    <div th:replace="~{fragments/modules/base/app_module_menu_box :: div}"></div>
	
	    <script th:replace="~{fragments/modules/base/script :: script}"></script>
	    <script type="text/javascript">
	        $(document).ready(function () {
	
	            // DataTables buttons configuration
	            var buttons = [
	                {
	                    extend: 'pageLength',
	                    className: 'btn btn-warning'
	                },
	                {
	                    title: 'Data export',
	                    extend: 'copyHtml5',
	                    text: 'Copy',
	                    className: 'btn btn-secondary',
	                    id: 'copyBtn'
	                },
	                {
	                    extend: 'excelHtml5',
	                    text: 'Excel',
	                    className: 'btn btn-secondary',
	                    id: 'excelBtn'
	                },
	                {
	                    extend: 'csvHtml5',
	                    text: 'CSV',
	                    className: 'btn btn-secondary',
	                    id: 'csvBtn'
	                },
	                {
	                    extend: 'pdfHtml5',
	                    text: 'PDF',
	                    className: 'btn btn-secondary',
	                    id: 'pdfBtn'
	                },
	
	            ];
	
	            $('#assetDatatable').DataTable({
	                dom: 'Bftip',
	                columnDefs: [
	                    { targets: 'no-sort', orderable: false }
	                ],
	                lengthMenu: [
	                    [50, 100, 200, 500, -1],
	                    ['50 rows', '100 rows', '200 rows', '500 rows', 'Show all']
	                ],
	                scrollY: '50vh',
	                fixedColumns: {
	                    left: 1,
	                    right: 1
	                },
	                buttons: [buttons],
	                responsive: true,
	                searching: true,
	                select: false,
	                processing: false,
	            });
	            $('#searchInput').on('keyup', function () {
	                dataTable.search(this.value).draw();
	            });
	        });
	        function petimg(mobno, uniqueid) {
	            $.ajax({
	                type: "GET",
	                url: '/gcc/api/pet/getpetimg',
	                data: {
	                    'mobno': mobno,
	                    'uniqueid': uniqueid
	                },
	                success: function (x) {
	                    document.getElementById("myImg").src = "data:image/jpeg;base64," + x;
	                }
	            });
	            $('#exampleModal').modal({
	                backdrop: 'static',
	                keyboard: false
	            });
	            $('#exampleModal').modal('show');
	        }
	        function certificateimg(mobno, uniqueid) {
	            $.ajax({
	                type: "GET",
	                url: '/gcc/api/pet/getvacimg',
	                data: {
	                    'mobno': mobno,
	                    'uniqueid': uniqueid
	                },
	                success: function (x) {
	                    document.getElementById("myImg").src = "data:image/jpeg;base64," + x;
	                }
	            });
	            $('#exampleModal').modal({
	                backdrop: 'static',
	                keyboard: false
	            });
	            $('#exampleModal').modal('show');
	            //document.getElementById("myImg").src ="data:image/jpeg;base64,"+x.rabiesvacCerti;
	        }
	
	        function viewOwner(mobilenum) {
	            let own;
	            $.ajax({
	                type: "GET",
	                url: '/gcc/api/pet/getpetOwner',
	                data: { 'mobilenum': mobilenum },
	                success: function (bodyMessage) {
	                    ownercall(bodyMessage);
	                }
	            });
	        }
	        function ownercall(list) {
	            $('#ownerForm').modal({
	                backdrop: 'static',
	                keyboard: false
	            });
	            $('#ownerForm').modal('show');
	            document.getElementById("title").innerHTML = list.title;
	            document.getElementById("fname").innerHTML = list.fname;
	            document.getElementById("doornumber").innerHTML = list.doornumber;
	            document.getElementById("street").innerHTML = list.street;
	            document.getElementById("area").innerHTML = list.area;
	            document.getElementById("city").innerHTML = list.city;
	            document.getElementById("pincode").innerHTML = list.pincode;
	            document.getElementById("zone").innerHTML = list.zone;
	            document.getElementById("ward").innerHTML = list.ward;
	            document.getElementById("phone").innerHTML = list.phone;
	            document.getElementById("email").innerHTML = list.email;
	            document.getElementById("pancard").innerHTML = list.pancard;
	            document.getElementById("aadhar").innerHTML = list.aadhar;
	            document.getElementById("voterid").innerHTML = list.voterid;
	
	        }
	        // Function to call modal for New pet registration
	        callAdd = function () {
	            $('#addForm').modal({
	                backdrop: 'static',
	                keyboard: false
	            })
	            $('#addForm').modal('show');
	        }
	        function licenceInfo(mobno, uniqueid) {
	            $.ajax({
	                type: "GET",
	                url: '/gcc/api/pet/getlicenseinfo',
	                data: {
	                    'mobilenum': mobno,
	                    'uniqueid': uniqueid
	                },
	                success: function (list) {
	                    $('#licForm').modal({
	                        backdrop: 'static',
	                        keyboard: false
	                    });
	                    $('#licForm').modal('show');
	                    document.getElementById("uniqueid").innerHTML = list.uniqueid;
	                    document.getElementById("licno").innerHTML = list.licenseNo;
	                    document.getElementById("phonee").innerHTML = list.phone;
	                    document.getElementById("valid").innerHTML = list.validity;
	
	                }
	
	            });
	        }
	
	
	        function viewfulllicense() {
	            var id = document.getElementById("uniqueid").value;;
	            var phone = document.getElementById("phone").value;
	            //window.open('/owners/getlicensebymobo/'+id+'/'+phone,'_blank');
	            $.ajax({
	                type: "GET",
	                url: '/gcc/pet/owners/ /' + id + '/' + phone,
	                success: function (bodyMessage) {
	                    $("#htmldatatxt").html(bodyMessage);
	                    $('#getpetlic').modal({
	                        backdrop: 'static',
	                        keyboard: false
	                    });
	                    $('#getpetlic').modal('show');
	                }
	            })
	        }
	        function closeme() {
	            window.location.reload();
	        }
	        function printme() {
	            var printContent = document.getElementById('htmldatatxt').innerHTML;
	            var originalContent = document.body.innerHTML;
	            document.body.innerHTML = printContent;
	            window.print();
	            document.body.innerHTML = originalContent;
	        }
	
	
	
	
	        function getbydate() {
	            var x = document.getElementById("fromdate").value;
	            var y = document.getElementById("todate").value;
	
	            var url = '/gcc/pet/licenseIssued?fromDate=' + x + '&toDate=' + y;
	            window.location.href = url;
	
	        }
	        function resetDate() {
	            var url = '/gcc/pet/licenseIssued';
	            window.location.href = url;
	        }
	
	    </script>
	</body>
	
	</html>